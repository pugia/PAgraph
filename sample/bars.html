<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>PAgraph | bars - stacked</title>

	<link href="style.css" rel="stylesheet" type="text/css">

	<script src="../bower_components/jquery/jquery.min.js" charset="utf-8"></script>
	<script src="../bower_components/d3/d3.min.js" charset="utf-8"></script>

<!--
	<link href="../dist/css/PAgraph.min.css?5" rel="stylesheet" type="text/css">
	<script src="../dist/js/PAgraph.min.js?5"></script>
-->
	
	<link href="../src/css/PAgraph.css" rel="stylesheet" type="text/css">
	<script src="../src/js/PAgraph.js"></script>
			
</head>
<body>	
	
	<a href="index.html">&laquo; Back to examples list</a>
	
	<h1>Mode: bars - <em>stacked</em></h1>

	<div id="graph_0" style="height: 500px; width: 70%"></div>
	
	<div style="position: absolute; right: 0; top: 0; padding: 10px;">
		<button id="test_01">Test 01</button>
		<button id="test_02">Test 02</button>
		<button id="test_03">Test 03</button><br/><br/>
		<button id="compare_01">Compare 01</button>
		<button id="compare_02">Compare 02</button>
		<button id="compare_03">Compare 03</button><br/><br>
		<button id="remove">Remove compare</button>
	</div>

	<script>	
		
	var graph = $('#graph_0').PAgraph({
		mode: 'bars',
		debug: true,
		config: {
			stacked: true,
			spacing: 10,
			rectRadius: 3,
			grid: {
				x: {
					format: function(v) {
						var r = v.substr(0,2) + ' ' + v.substr(2,3);
						return r;
					}
				},
				y: {
					format: {
						decimals: 2,
						after: '%'
					}
				}
			}
		}
	});		
	
	$(function() {

		$('#test_01').on('click', function() {
			
			$.getJSON('response/weekday_test_01.json', function(result) {
					
					$.when(graph.initGraph(0, '#ff2200')).done(function(index) { 
						$.when(graph.setData(result.data)).done(function() {
							graph.draw();
						});
					});
									
				})
			
		})

		$('#test_02').on('click', function() {
			
			$.getJSON('response/weekday_test_02.json', function(result) {
					
					$.when(graph.initGraph(0, '#ff2200')).done(function(index) { 
						$.when(graph.setData(result.data)).done(function() {
							graph.draw();
						});
					});
				
				})
			
		}).click();
		
		$('#test_03').on('click', function() {
			
			$.getJSON('response/weekday_test_03.json', function(result) {
					
					$.when(graph.setData(result.data)).done(function() {
						graph.draw();
					});
				
				})
			
		});

		$('#compare_01').on('click', function() {
			
			$.getJSON('response/weekday_test_01.json', function(result) {
					$.when(graph.initGraph(1, '#145fd6')).done(function(index) {
						$.when(graph.setData(result.data, index)).done(function() {
							graph.draw();						
						});
					})
				})
			
		});

		$('#compare_02').on('click', function() {
			
			$.getJSON('response/weekday_test_02.json', function(result) {
					$.when(graph.initGraph(1, '#145fd6')).done(function(index) {
						$.when(graph.setData(result.data, index)).done(function() {
							graph.draw();						
						});
					})
				})
			
		});
		
		$('#compare_03').on('click', function() {
			
			$.getJSON('response/weekday_test_03.json', function(result) {
					
					$.when(graph.initGraph(2, '#5fd614')).done(function(index) {
						$.when(graph.setData(result.data, index)).done(function() {
							graph.draw();						
						});
					})
				
				})
			
		});
		
		$('#remove').on('click', function() {
			
			$.when(graph.removeGraph())
				.done(function() {
					graph.draw()
				})
			
		});

		$('#test').on('click', function() {
			
			$.getJSON('response/weekday_test_02.json', function(result) {

					$.when(graph.initGraph(1)).done(function(index) {
						console.log('index', index);
					})

				})
			
		});
		
	})	

	</script>
	
</body>

</html>